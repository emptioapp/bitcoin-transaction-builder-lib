import { hexToBytes } from "@noble/hashes/utils";
import { ECPairKey } from "./src/ecpairkey";
import { P2PKH } from "./src/p2pkh";
import { ripemd160, sha256 } from "./src/utils";

var pairKey = new ECPairKey({ privateKey: "16260783e40b16731673622ac8a5b045fc3ea4af70f727f3f9e92bdd3a1ddc42", network: "testnet" })

var transaction = new P2PKH(pairKey)

transaction.version = 1
transaction.locktime = 0

transaction.addInput({
    txindex: 0,
    scriptPubkey: "76a9146bf19e55f94d986b4640c154d86469934191951188ac",
    txid: "f34e1c37e736727770fed85d1b129713ef7f300304498c31c833985f487fa2f3",
})

transaction.addOutput({
    address: "mhmhRnN58ki9zbRJ63mpNGQXoYvdMXZsXt",
    value: 25100000
})

transaction.addOutput({
    address: "mqMi3XYqsPvBWtrJTk8euPWDVmFTZ5jHuK",//pairKey.getAddress(),
    value: 61900000
})

var transactionRow = transaction.build()

console.log("tx row", transactionRow)
console.log("txid", transaction.getTxid())


/*
sig:
48304502202197f5e500d921c88f59efcc2eccc00ce5502b8dd75704fe5dd33a03c6606649022100c56637639fb2055f489b0b34d71cdd0df34204f36a3ca7ab47db2ae1f82e37df01210282006e9398a6986eda61fe91674c3a108c399475bf1e738f19dfc2db11db1d28
esperada: 
4730440220111a482aba6afba12a6f27de767dd4d06417def665bd100bc68c42845c752a8f02205e86f5e054b2c6cac5d663664e35779fb034387c07848bc7724442cacf65932401210282006e9398a6986eda61fe91674c3a108c399475bf1e738f19dfc2db11db1d28


transaction result: 
0100000001f3a27f485f9833c8318c490403307fef1397121b5dd8fe70777236e7371c4ef3000000006a47304402205598d37448064924b0e4b0d43f74625f1c87da0c7e56266b48081ce0fa69ec850220067581bbc97b9f7dd9d5b67fd2558e7c516c2b71c5f0f472b3e290a086a5696d01210282006e9398a6986eda61fe91674c3a108c399475bf1e738f19dfc2db11db1d28
ffffffff02e0fe7e01000000001976a91418ba14b3682295cb05230e31fecb00089240660888ace084b003000000001976a9146bf19e55f94d986b4640c154d86469934191951188ac00000000
transaction doc: 
0100000001f3a27f485f9833c8318c490403307fef1397121b5dd8fe70777236e7371c4ef3000000006a4730440220111a482aba6afba12a6f27de767dd4d06417def665bd100bc68c42845c752a8f02205e86f5e054b2c6cac5d663664e35779fb034387c07848bc7724442cacf65932401210282006e9398a6986eda61fe91674c3a108c399475bf1e738f19dfc2db11db1d28
ffffffff02e0fe7e01000000001976a91418ba14b3682295cb05230e31fecb00089240660888ace084b003000000001976a9146bf19e55f94d986b4640c154d86469934191951188ac00000000

*/